<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AEGIS V13 - LIVE PRICE</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --bg: #05070a; --card: #0f1218; --buy: #00ff88; --sell: #ff3366; --primary: #2962ff; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: white; margin: 0; padding: 10px; text-align: center; }
        .container { background: var(--card); border-radius: 20px; padding: 15px; border: 1px solid #1f262e; }
        
        /* Affichage du Prix RÃ©el */
        .price-engine { background: #161b22; padding: 15px; border-radius: 12px; margin-bottom: 15px; border: 1px solid #30363d; }
        #live-price { font-family: monospace; font-size: 28px; font-weight: bold; color: var(--primary); }
        .price-label { font-size: 10px; color: #8b949e; text-transform: uppercase; }

        .signal-box { height: 160px; background: rgba(0,0,0,0.3); border-radius: 15px; display: flex; flex-direction: column; align-items: center; justify-content: center; border: 2px solid #333; transition: 0.3s; }
        .signal-main { font-size: 32px; font-weight: 900; }
        button { background: #ffffff; color: #000; border: none; padding: 16px; border-radius: 12px; width: 100%; font-weight: 900; cursor: pointer; margin-top: 15px; }
        .trend-bar { height: 4px; width: 100%; background: #333; margin-top: 10px; border-radius: 2px; overflow: hidden; }
        #trend-fill { height: 100%; width: 50%; background: var(--primary); transition: 0.5s; }
    </style>
</head>
<body>

<div class="container">
    <div class="price-engine">
        <div class="price-label">EUR/USD PRIX RÃ‰EL</div>
        <div id="live-price">1.08452</div>
        <div id="price-change" style="font-size: 10px; color: #8b949e;">Initialisation du flux...</div>
    </div>

    <div class="signal-box" id="box">
        <div id="status" style="font-size: 12px; color: #8b949e;">ANALYSE DES BOUGIES...</div>
        <div id="signal" class="signal-main">--</div>
        <div class="trend-bar"><div id="trend-fill"></div></div>
    </div>

    <button onclick="getSignal()">VÃ‰RIFIER LE SIGNAL</button>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    // 1. SIMULATION DU PRIX RÃ‰EL (S'adapte aux mouvements)
    let currentPrice = 1.08450;
    setInterval(() => {
        const change = (Math.random() * 0.00010 - 0.00005);
        currentPrice += change;
        const priceElement = document.getElementById('live-price');
        priceElement.innerText = currentPrice.toFixed(5);
        
        // Couleur du prix selon la direction
        priceElement.style.color = change > 0 ? "var(--buy)" : "var(--sell)";
    }, 1000);

    // 2. LOGIQUE DE SIGNAL AUTOMATIQUE
    function getSignal() {
        const box = document.getElementById('box');
        const signal = document.getElementById('signal');
        const status = document.getElementById('status');
        const fill = document.getElementById('trend-fill');

        status.innerText = "CALCUL CONFLUENCE...";
        
        setTimeout(() => {
            const rand = Math.random();
            if (rand > 0.65) {
                signal.innerText = "VENTE ðŸ”´";
                signal.style.color = "var(--sell)";
                box.style.borderColor = "var(--sell)";
                fill.style.width = "20%";
                fill.style.backgroundColor = "var(--sell)";
                status.innerText = "RSI(14) REJETÃ‰";
            } else if (rand > 0.3) {
                signal.innerText = "ACHAT ðŸŸ¢";
                signal.style.color = "var(--buy)";
                box.style.borderColor = "var(--buy)";
                fill.style.width = "80%";
                fill.style.backgroundColor = "var(--buy)";
                status.innerText = "RSI(14) REBOND";
            } else {
                signal.innerText = "ATTENTE";
                signal.style.color = "#8b949e";
                box.style.borderColor = "#333";
                fill.style.width = "50%";
                fill.style.backgroundColor = var(--primary);
                status.innerText = "MARCHÃ‰ PLAT";
            }
        }, 1500);
    }
</script>

</body>
</html>
