<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AEGIS V18 - MULTI-FILTRES</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
:root { --bg: #040508; --card: #0d1117; --buy: #00ff88; --sell: #ff3366; --primary: #2962ff; --warn: #ffcc00; }
body { font-family: 'Inter', sans-serif; background: var(--bg); color: white; margin: 0; padding: 10px; text-align: center; }
.container { background: var(--card); border-radius: 20px; padding: 15px; border: 1px solid #30363d; }
.main-box { height: 160px; background: #000; border-radius: 15px; display: flex; flex-direction: column; align-items: center; justify-content: center; border: 4px solid #333; margin: 15px 0; transition: 0.2s; }
.signal-val { font-size: 38px; font-weight: 900; }
.time-advice { background: rgba(255,204,0,0.1); border-radius: 10px; padding: 12px; margin: 10px 0; border: 1px solid var(--warn); display: none; }
button { background: #ffffff; color: #000; border: none; padding: 18px; border-radius: 12px; width: 100%; font-weight: 900; cursor: pointer; }
button:disabled { opacity: 0.3; }
</style>
</head>
<body>

<div class="container">
    <div id="main-box" class="main-box">
        <div id="signal-label" style="font-size: 10px; color: #888;">SYST√àME PR√äT</div>
        <div id="signal-val" class="signal-val">---</div>
        <div id="timer-msg" style="font-size: 11px; color: #484f58; margin-top: 10px;">PR√äT POUR ANALYSE</div>
    </div>

    <div class="time-advice" id="advice-box">
        <span style="font-size: 10px; color: var(--warn); text-transform: uppercase; font-weight: bold;">‚è± DUR√âE CONSEILL√âE</span>
        <div id="time-val" style="font-size: 18px; font-weight: 900; color: white;">--</div>
    </div>

    <button id="btn-main" onclick="detectNow()">LANCER L'ANALYSE EXPERTE</button>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

function detectNow() {
    const box = document.getElementById('main-box');
    const val = document.getElementById('signal-val');
    const label = document.getElementById('signal-label');
    const msg = document.getElementById('timer-msg');
    const adviceBox = document.getElementById('advice-box');
    const timeVal = document.getElementById('time-val');
    const btn = document.getElementById('btn-main');

    label.innerText = "ANALYSE MULTI-FILTRES...";
    val.innerText = "...";
    btn.disabled = true;
    adviceBox.style.display = "none";

    setTimeout(() => {
        /* DONN√âES DYNAMIQUES ( Simulation de ton backend ) */
        const ema50 = 1.0850 + (Math.random() * 0.001);
        const ema200 = 1.0845;
        const rsi14 = Math.floor(Math.random() * 100);

        let signal = "ATTENDRE";
        let color = "#333";
        let timeAdvice = "";

        const trendUp = ema50 > ema200;
        const trendDown = ema50 < ema200;

        // TA LOGIQUE DE CONFLUENCE
        if (trendUp && rsi14 < 35) {
            signal = "ACHAT üü¢";
            color = "var(--buy)";
            timeAdvice = rsi14 < 20 ? "1 MIN (REBOND RAPIDE)" : "5 MIN (TENDANCE)";
        } 
        else if (trendDown && rsi14 > 65) {
            signal = "VENTE üî¥";
            color = "var(--sell)";
            timeAdvice = rsi14 > 80 ? "1 MIN (CHUTE RAPIDE)" : "5 MIN (TENDANCE)";
        } 
        else {
            signal = "NEUTRE";
            color = "#484f58";
            timeAdvice = "PAS DE TRADE";
        }

        // AFFICHAGE
        val.innerText = signal;
        val.style.color = color;
        box.style.borderColor = color;
        label.innerText = signal === "NEUTRE" ? "MARCH√â RISQU√â" : "CONFLUENCE VALID√âE";
        
        if (signal !== "NEUTRE") {
            timeVal.innerText = timeAdvice;
            adviceBox.style.display = "block";
        }
        
        msg.innerText = "VERROUILL√â - ATTENDRE LA BOUGIE SUIVANTE";

        // D√©blocage apr√®s 15 secondes pour s√©curit√©
        setTimeout(() => { btn.disabled = false; }, 15000);

    }, 800);
}
</script>
</body>
</html>
