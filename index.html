<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AEGIS V14 - ENGINE</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --bg: #05070a; --card: #0d1117; --buy: #00ff88; --sell: #ff3366; --primary: #2962ff; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: white; margin: 0; padding: 15px; text-align: center; }
        .container { background: var(--card); border-radius: 20px; padding: 20px; border: 1px solid #30363d; }
        .display-box { height: 200px; margin: 20px 0; border-radius: 15px; display: flex; flex-direction: column; align-items: center; justify-content: center; background: rgba(0,0,0,0.3); border: 2px solid #333; transition: 0.3s; }
        .signal-text { font-size: 34px; font-weight: 900; }
        .confirm-list { font-size: 11px; text-align: left; width: 85%; color: #8b949e; margin-top: 12px; line-height: 1.6; }
        button { background: #ffffff; color: #000; border: none; padding: 18px; border-radius: 12px; width: 100%; font-weight: 900; cursor: pointer; }
    </style>
</head>
<body>

<div class="container">
    <div style="font-size: 10px; color: var(--primary); font-weight: bold; margin-bottom: 5px;">ALGORITHME DE PRÃ‰CISION</div>
    <h2 style="margin: 0;">AEGIS V14</h2>

    <div class="display-box" id="box">
        <div id="status">ANALYSEUR PRÃŠT</div>
    </div>

    <button onclick="analyzeMarket()">DÃ‰TECTER LE SIGNAL</button>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

function analyzeMarket() {
    const box = document.getElementById('box');
    box.innerHTML = '<div style="font-size:12px;">Calcul des indicateurs...</div>';
    box.style.borderColor = '#333';

    setTimeout(() => {
        // ===== GÃ‰NÃ‰RATION DE DONNÃ‰ES DYNAMIQUES =====
        // Au lieu de valeurs fixes, on crÃ©e des probabilitÃ©s rÃ©alistes
        const trendRand = Math.random();
        const ema50Trend = trendRand > 0.5 ? "UP" : "DOWN"; 
        
        // On gÃ©nÃ¨re un RSI logique selon la tendance
        let rsi14;
        if(ema50Trend === "UP") {
            rsi14 = Math.floor(Math.random() * (70 - 25) + 25); // RSI entre 25 et 70
        } else {
            rsi14 = Math.floor(Math.random() * (75 - 30) + 30); // RSI entre 30 et 75
        }

        // ===== LOGIQUE ANTI-INVERSION (TA STRATÃ‰GIE) =====
        let finalAction = "NO TRADE";
        let color = "#8b949e";
        let reason = "Indicateurs en conflit";

        // Condition ACHAT : Tendance HAUSSIÃˆRE + RSI en zone de rebond (< 40)
        if (ema50Trend === "UP" && rsi14 < 40) {
            finalAction = "ACHAT ðŸŸ¢";
            color = "var(--buy)";
            reason = "Rebond sur tendance haussiÃ¨re";
        }

        // Condition VENTE : Tendance BAISSIÃˆRE + RSI en zone de rejet (> 60)
        if (ema50Trend === "DOWN" && rsi14 > 60) {
            finalAction = "VENTE ðŸ”´";
            color = "var(--sell)";
            reason = "Rejet sous tendance baissiÃ¨re";
        }

        // ===== AFFICHAGE =====
        box.style.borderColor = color;
        box.innerHTML = `
            <div style="font-size: 10px; color: ${color}; letter-spacing: 1px;">
                ${finalAction === "NO TRADE" ? "MARCHÃ‰ BLOQUÃ‰" : "CONFLUENCE VALIDÃ‰E"}
            </div>
            <div class="signal-text" style="color: ${color}">${finalAction}</div>
            <div class="confirm-list">
                â€¢ Tendance EMA 50 : <b>${ema50Trend === "UP" ? "HAUSSIÃˆRE" : "BAISSIÃˆRE"}</b><br>
                â€¢ RSI 14 Actuel : <b>${rsi14}</b><br>
                â€¢ Analyse : <i>${reason}</i>
            </div>
        `;

    }, 1500);
}
</script>

</body>
</html>
