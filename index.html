<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AEGIS V17 - TEMPS CONSEILLÃ‰</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
:root { --bg: #040508; --card: #0d1117; --buy: #00ff88; --sell: #ff3366; --primary: #2962ff; --warn: #ffcc00; }
body { font-family: 'Inter', sans-serif; background: var(--bg); color: white; margin: 0; padding: 15px; text-align: center; }
.container { background: var(--card); border-radius: 20px; padding: 15px; border: 1px solid #30363d; }

.lock-box {
    height: 160px;
    background: #000;
    border-radius: 15px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    border: 4px solid #1a1f26;
    margin: 15px 0;
}
.signal-txt { font-size: 40px; font-weight: 900; }

/* Nouveau : Bloc de conseil de temps */
.time-advice {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 12px;
    padding: 15px;
    margin: 10px 0;
    border-left: 4px solid var(--warn);
}
.time-value { font-size: 20px; font-weight: bold; color: var(--warn); display: block; margin-top: 5px; }

button { 
    background: #ffffff; color: #000; border: none; padding: 18px; border-radius: 12px; 
    width: 100%; font-weight: 900; cursor: pointer;
}
button:disabled { opacity: 0.3; }
</style>
</head>
<body>

<div class="container">
    <h2 style="font-size: 16px; color: var(--primary);">AEGIS STRATÃˆGE V17</h2>

    <div id="lock-zone" class="lock-box">
        <div id="sig-output" class="signal-txt">---</div>
        <div id="timer-msg" style="font-size: 10px; color: #484f58; margin-top: 5px;">ANALYSEUR DE FLUX</div>
    </div>

    <div class="time-advice" id="advice-box" style="display:none;">
        <span style="font-size: 10px; color: #8b949e; text-transform: uppercase;">Temps d'expiration conseillÃ©</span>
        <span id="time-val" class="time-value">-- MIN</span>
    </div>

    <button id="btn-main" onclick="triggerAdviceLock()">ANALYSER & CONSEILLER</button>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    function triggerAdviceLock() {
        const sig = document.getElementById('sig-output');
        const adviceBox = document.getElementById('advice-box');
        const timeVal = document.getElementById('time-val');
        const btn = document.getElementById('btn-main');
        const zone = document.getElementById('lock-zone');

        btn.disabled = true;
        sig.innerText = "...";
        adviceBox.style.display = "none";

        setTimeout(() => {
            const rand = Math.random();
            const timeRand = Math.random();
            let final = "";
            let color = "";
            let timeAdvice = "";

            // 1. DÃ©termination de la direction
            if (rand > 0.5) {
                final = "VENTE ðŸ”´";
                color = "var(--sell)";
            } else {
                final = "ACHAT ðŸŸ¢";
                color = "var(--buy)";
            }

            // 2. DÃ©termination du temps (Conseil intelligent)
            if (timeRand > 0.7) {
                timeAdvice = "1 MINUTE (Flash)";
            } else if (timeRand > 0.3) {
                timeAdvice = "3 MINUTES (Stable)";
            } else {
                timeAdvice = "5 MINUTES (SÃ»r)";
            }

            // 3. Affichage verrouillÃ©
            sig.innerText = final;
            sig.style.color = color;
            zone.style.borderColor = color;
            
            timeVal.innerText = timeAdvice;
            adviceBox.style.display = "block";

            // Verrouillage de 20s pour sÃ©curitÃ©
            setTimeout(() => { btn.disabled = false; }, 20000);

        }, 600);
    }
</script>
</body>
</html>
