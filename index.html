<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AEGIS V14 - TON CODE</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --bg: #05070a; --card: #0d1117; --buy: #00ff88; --sell: #ff3366; --primary: #2962ff; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: white; margin: 0; padding: 15px; text-align: center; }
        .container { background: var(--card); border-radius: 20px; padding: 20px; border: 1px solid #30363d; }
        #box { height: 200px; margin: 20px 0; border-radius: 15px; display: flex; flex-direction: column; align-items: center; justify-content: center; background: rgba(0,0,0,0.3); border: 2px solid #30363d; transition: 0.3s; }
        .signal-text { font-size: 34px; font-weight: 900; }
        .confirm-list { font-size: 11px; text-align: left; width: 85%; color: #8b949e; margin-top: 12px; line-height: 1.6; }
        button { background: #ffffff; color: #000; border: none; padding: 18px; border-radius: 12px; width: 100%; font-weight: 900; cursor: pointer; }
    </style>
</head>
<body>

<div class="container">
    <h2>AEGIS ALGO</h2>
    
    <div id="box">
        <div id="idle">CLIQUEZ SUR ANALYSER</div>
    </div>

    <button onclick="analyzeMarket()">ANALYSER LE MARCHÃ‰</button>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

/* TON CODE CI-DESSOUS - AUCUNE MODIFICATION */

function analyzeMarket() {
    const box = document.getElementById('box');
    box.innerHTML = '<div style="font-size:12px;">Analyse EMA 50 & RSI 14â€¦</div>';
    box.style.borderColor = '#30363d';

    setTimeout(() => {

        // ===== DONNÃ‰ES (Ã€ REMPLACER PAR API PLUS TARD) =====
        const ema50Trend = "UP";   // "UP" ou "DOWN"
        const rsi14 = 27;          // valeur RSI rÃ©elle normalement
        const priceDirection = "DOWN"; // mouvement local

        // ===== LOGIQUE ANTI-INVERSION =====
        let finalAction = "NO TRADE";
        let color = "#8b949e";
        let reason = "Conflit de signaux";

        if (ema50Trend === "UP" && rsi14 < 30) {
            finalAction = "ACHAT ðŸŸ¢";
            color = "var(--buy)";
            reason = "Pullback haussier confirmÃ©";
        }

        if (ema50Trend === "DOWN" && rsi14 > 70) {
            finalAction = "VENTE ðŸ”´";
            color = "var(--sell)";
            reason = "Rejet baissier confirmÃ©";
        }

        // ===== AFFICHAGE =====
        box.style.borderColor = color;
        box.innerHTML = `
            <div style="font-size: 10px; color: ${color}">
                ${finalAction === "NO TRADE" ? "MARCHÃ‰ BLOQUÃ‰" : "CONFLUENCE VALIDÃ‰E"}
            </div>
            <div class="signal-text" style="color: ${color}">
                ${finalAction}
            </div>
            <div class="confirm-list">
                â€¢ Tendance EMA 50 : ${ema50Trend === "UP" ? "HAUSSIÃˆRE" : "BAISSIÃˆRE"}<br>
                â€¢ RSI 14 : ${rsi14}<br>
                â€¢ DÃ©cision : ${reason}
            </div>
        `;

    }, 1500);
}
</script>

</body>
</html>
